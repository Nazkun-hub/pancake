---
description: 
globs: 
alwaysApply: false
---
# PancakeSwap V3 æµåŠ¨æ€§ç®¡ç†ç³»ç»Ÿ - å¼€å‘å¼•å¯¼è§„åˆ™

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ **PancakeSwap V3 æµåŠ¨æ€§ç®¡ç†ç³»ç»Ÿ**ï¼Œé‡‡ç”¨æ¨¡å—åŒ–æ¶æ„è®¾è®¡ï¼Œæä¾›å®Œæ•´çš„æµåŠ¨æ€§æ·»åŠ ã€å¤´å¯¸ç®¡ç†ã€é’±åŒ…æ“ä½œå’Œç­–ç•¥æ‰§è¡ŒåŠŸèƒ½ã€‚

### æ ¸å¿ƒè®¾è®¡ç†å¿µ
- **èŒè´£åˆ†ç¦»**: æ¯ä¸ªæœåŠ¡ä¸“æ³¨å•ä¸€æ ¸å¿ƒåŠŸèƒ½
- **åŠŸèƒ½å¤ç°**: 100%å¤ç°å‚è€ƒè„šæœ¬çš„æ‰€æœ‰é€»è¾‘å’Œæ­¥éª¤  
- **ç”¨æˆ·å‹å¥½**: æ™ºèƒ½å‚æ•°è®¾è®¡ï¼Œç®€åŒ–ç”¨æˆ·è¾“å…¥
- **æ¶æ„æ¸…æ™°**: æ¨¡å—é—´ç•Œé™æ¸…æ™°ï¼Œä¸å…è®¸è·¨èŒè´£è°ƒç”¨
- **ä»£ç ç®€æ´**: å•ä¸€æ–‡ä»¶ä¸è¶…è¿‡800è¡Œï¼Œå•ä¸€æ–¹æ³•ä¸è¶…è¿‡100è¡Œ

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æœåŠ¡åˆ†å±‚æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  API å±‚                         â”‚  
â”‚        [routes.ts](mdc:src/api/routes.ts)        â”‚
â”‚     HTTPæ¥å£ & å‚æ•°éªŒè¯ & å“åº”å¤„ç†                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ä¸“ç”¨æœåŠ¡å±‚                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ LiquidityManagerâ”‚ PositionManagerâ”‚ ContractServiceâ”‚
â”‚   ğŸ’§ æµåŠ¨æ€§æ·»åŠ    â”‚    ğŸ¯ å¤´å¯¸ç®¡ç†   â”‚   ğŸ”§ åŸºç¡€åˆçº¦   â”‚
â”‚ [LiquidityManager.ts](mdc:src/services/LiquidityManager.ts) â”‚ [PositionManager.ts](mdc:src/services/PositionManager.ts) â”‚ [ContractService.ts](mdc:src/services/ContractService.ts) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                åŸºç¡€è®¾æ–½å±‚                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Web3Service   â”‚  CryptoService â”‚   EventBus    â”‚
â”‚  ğŸŒ åŒºå—é“¾è¿æ¥   â”‚  ğŸ” é’±åŒ…åŠ å¯†    â”‚  ğŸ“¡ äº‹ä»¶é€šä¿¡   â”‚
â”‚ [Web3Service.ts](mdc:src/services/Web3Service.ts) â”‚ [CryptoService.ts](mdc:src/services/CryptoService.ts) â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å®Œæ•´ç›®å½•ç»“æ„
```
ğŸ“¦ é¡¹ç›®æ ¹ç›®å½•/
â”œâ”€â”€ ğŸ“ src/                          # ä¸»ç¨‹åºæºä»£ç 
â”‚   â”œâ”€â”€ ğŸ“„ [app.ts](mdc:src/app.ts)                    # Expressåº”ç”¨ä¸»æ–‡ä»¶  
â”‚   â”œâ”€â”€ ğŸ“„ [index.ts](mdc:src/index.ts)                # ç¨‹åºå…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“ api/                      # APIå±‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ [routes.ts](mdc:src/api/routes.ts)             # ç»Ÿä¸€è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ ğŸ“„ [okx-proxy-routes.ts](mdc:src/api/okx-proxy-routes.ts)   # OKXä»£ç†è·¯ç”±
â”‚   â”œâ”€â”€ ğŸ“ services/                 # ä¸“ç”¨æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ [LiquidityManager.ts](mdc:src/services/LiquidityManager.ts)   # æµåŠ¨æ€§æ·»åŠ 
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ [PositionManager.ts](mdc:src/services/PositionManager.ts)    # å¤´å¯¸ç®¡ç†  
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ [ContractService.ts](mdc:src/services/ContractService.ts)    # åŸºç¡€åˆçº¦
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ [Web3Service.ts](mdc:src/services/Web3Service.ts)        # åŒºå—é“¾è¿æ¥
â”‚   â”‚   â””â”€â”€ ğŸ“„ [CryptoService.ts](mdc:src/services/CryptoService.ts)      # é’±åŒ…åŠ å¯†
â”‚   â”œâ”€â”€ ğŸ“ types/                    # ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ ğŸ“„ [interfaces.ts](mdc:src/types/interfaces.ts)         # ç»Ÿä¸€æ¥å£
â”‚   â”œâ”€â”€ ğŸ“ di/                       # ä¾èµ–æ³¨å…¥
â”‚   â”‚   â””â”€â”€ ğŸ“„ [container.ts](mdc:src/di/container.ts)          # DIå®¹å™¨
â”‚   â”œâ”€â”€ ğŸ“ constants/                # å¸¸é‡å®šä¹‰
â”‚   â”œâ”€â”€ ğŸ“ adapters/                 # å¤–éƒ¨é€‚é…å™¨
â”‚   â”œâ”€â”€ ğŸ“ business/                 # ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ ğŸ“ contracts/                # åˆçº¦ç›¸å…³
â”‚   â””â”€â”€ ğŸ“ infrastructure/           # åŸºç¡€è®¾æ–½
â”œâ”€â”€ ğŸ“ strategy-ui/                  # ç­–ç•¥ç®¡ç†å‰ç«¯ (ç«¯å£: 5000)
â”‚   â”œâ”€â”€ ğŸ“„ [server.js](mdc:strategy-ui/server.js)              # Expressé™æ€æœåŠ¡å™¨
â”‚   â””â”€â”€ ğŸ“ public/                   # é™æ€èµ„æºæ–‡ä»¶
â”œâ”€â”€ ğŸ“ web/                          # ä¸»ç¨‹åºå‰ç«¯ (ç«¯å£: 4001)  
â”‚   â”œâ”€â”€ ğŸ“„ [server.js](mdc:web/server.js)                # Expressé™æ€æœåŠ¡å™¨
â”‚   â””â”€â”€ ğŸ“ public/                   # é™æ€èµ„æºæ–‡ä»¶
â”œâ”€â”€ ğŸ“ okx-proxy/                    # ğŸ”„ OKXäº¤æ¢ä»£ç†æœåŠ¡ (ç«¯å£: 8001)
â”‚   â”œâ”€â”€ ğŸ“„ [package.json](mdc:okx-proxy/package.json)            # ä»£ç†æœåŠ¡é…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ [proxy-server.js](mdc:okx-proxy/proxy-server.js)        # æ ¸å¿ƒä»£ç†é€»è¾‘
â”‚   â””â”€â”€ ğŸ“„ [README.md](mdc:okx-proxy/README.md)               # ä»£ç†æœåŠ¡æ–‡æ¡£
â”œâ”€â”€ ğŸ“ okx_dex_api/                  # OKX DEX APIæœåŠ¡ (ç«¯å£: 8000)
â”‚   â”œâ”€â”€ ğŸ“„ [package.json](mdc:okx_dex_api/package.json)            # ä¾èµ–é…ç½®
â”‚   â””â”€â”€ ğŸ“ src/                      # TypeScriptæºç 
â”œâ”€â”€ ğŸ“ scripts/                      # å¯åŠ¨å’Œç®¡ç†è„šæœ¬
â”‚   â”œâ”€â”€ ğŸ“„ [simple-start.sh](mdc:scripts/simple-start.sh)          # ç®€åŒ–å¯åŠ¨è„šæœ¬
â”‚   â””â”€â”€ ğŸ“„ [stop-all-services.sh](mdc:scripts/stop-all-services.sh)    # åœæ­¢æ‰€æœ‰æœåŠ¡
â”œâ”€â”€ ğŸ“ test/                         # æµ‹è¯•è„šæœ¬ç›®å½•
â”œâ”€â”€ ğŸ“ docs/                         # æ–‡æ¡£ç›®å½•
â”œâ”€â”€ ğŸ“ data/                         # æ•°æ®æ–‡ä»¶
â”œâ”€â”€ ğŸ“ config/                       # é…ç½®æ–‡ä»¶
â”œâ”€â”€ ğŸ“ examples/                     # ç¤ºä¾‹ä»£ç 
â”œâ”€â”€ ğŸ“„ [package.json](mdc:package.json)                 # ä¸»ç¨‹åºä¾èµ–é…ç½®
â”œâ”€â”€ ğŸ“„ [tsconfig.json](mdc:tsconfig.json)                # TypeScripté…ç½®
â”œâ”€â”€ ğŸ“„ [README.md](mdc:README.md)                     # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ ğŸ“„ [pancakeswap-architecture.mdc](mdc:pancakeswap-architecture.mdc) # æ¶æ„è§„èŒƒ
â””â”€â”€ ğŸ“„ [env.example](mdc:env.example)                  # ç¯å¢ƒå˜é‡ç¤ºä¾‹
```

## ğŸš€ ç³»ç»ŸæœåŠ¡ç«¯å£æ¶æ„

### ğŸ  ä¸»ç¨‹åºç³»ç»Ÿ (4xxxç«¯å£)
- **ä¸»ç¨‹åºåç«¯API**: `http://localhost:4000/api`
  - å¯åŠ¨æ–¹å¼: `npm start` æˆ– `npm run dev`
  - æ ¸å¿ƒåŠŸèƒ½: æµåŠ¨æ€§ç®¡ç†ã€å¤´å¯¸æ“ä½œã€é’±åŒ…ç®¡ç†ã€ç­–ç•¥æ‰§è¡Œ
  - WebSocketæœåŠ¡: `ws://localhost:4000`
  - å¥åº·æ£€æŸ¥: `http://localhost:4000/health`
  - æµ‹è¯•é¡µé¢: `http://localhost:4000/test/`
  - OKXè·¯ç”±: `http://localhost:4000/api/okx/*`

- **ä¸»ç¨‹åºå‰ç«¯**: `http://localhost:4001`  
  - å¯åŠ¨æ–¹å¼: `cd web && npm start`
  - åŠŸèƒ½: æµåŠ¨æ€§æ“ä½œä¸»ç•Œé¢

### ğŸ“Š ç­–ç•¥ç®¡ç†ç³»ç»Ÿ (5xxxç«¯å£)
- **ç­–ç•¥ç®¡ç†å‰ç«¯**: `http://localhost:5000`
  - å¯åŠ¨æ–¹å¼: `cd strategy-ui && npm start`
  - åŠŸèƒ½: ç­–ç•¥é…ç½®å’Œç®¡ç†ç•Œé¢

### ğŸ® OKXç³»ç»Ÿ (8xxxç«¯å£)
- **OKX DEX API**: `http://localhost:8000`
  - å¯åŠ¨æ–¹å¼: `cd okx_dex_api && npm run web`
  - åŠŸèƒ½: OKX DEXç‹¬ç«‹Webç•Œé¢æœåŠ¡

- **ğŸ”„ OKXäº¤æ¢ä»£ç†**: `http://localhost:8001/api/okx`
  - å¯åŠ¨æ–¹å¼: `cd okx-proxy && npm start`
  - åŠŸèƒ½: ä¸ºç­–ç•¥å¼•æ“æä¾›8001ç«¯å£çš„OKX APIè®¿é—®
  - ä»£ç†ç›®æ ‡: è½¬å‘æ‰€æœ‰è¯·æ±‚åˆ° `http://localhost:4000/api/okx/*`
  - å¥åº·æ£€æŸ¥: `http://localhost:8001/health`

### ğŸ”„ æœåŠ¡ä¾èµ–å…³ç³»
```
ç­–ç•¥å¼•æ“ â†’ 8001ç«¯å£ â†’ OKXä»£ç†æœåŠ¡ â†’ è½¬å‘åˆ°4000ç«¯å£ â†’ ä¸»ç³»ç»ŸOKXè·¯ç”±
```

## ğŸ› ï¸ ä¸€é”®å¯åŠ¨ç®¡ç†

### å®Œæ•´ç³»ç»Ÿå¯åŠ¨
```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
./scripts/simple-start.sh

# åœæ­¢æ‰€æœ‰æœåŠ¡  
./scripts/stop-all-services.sh

# æ£€æŸ¥ç«¯å£çŠ¶æ€
./scripts/check-ports.sh
```

### å•ç‹¬æœåŠ¡å¯åŠ¨
```bash
# ä¸»ç¨‹åºåç«¯ (4000ç«¯å£)
npm run dev

# ä¸»ç¨‹åºå‰ç«¯ (4001ç«¯å£) 
cd web && npm start

# ç­–ç•¥ç®¡ç†å‰ç«¯ (5000ç«¯å£)
cd strategy-ui && npm start

# OKX DEX API (8000ç«¯å£)
cd okx_dex_api && npm run web

# OKXäº¤æ¢ä»£ç† (8001ç«¯å£)
cd okx-proxy && npm start
```

## ğŸ’§ æ ¸å¿ƒæœåŠ¡åŠŸèƒ½è¯¦è§£

### LiquidityManager - æµåŠ¨æ€§æ·»åŠ ä¸“ç”¨æœåŠ¡
**èŒè´£**: 100%å¤ç° `real_multicall_direct_test_fixed_v5.js` çš„å®Œæ•´æµåŠ¨æ€§æ·»åŠ æµç¨‹

**æ ¸å¿ƒåŠŸèƒ½**:
- âœ… æ™ºèƒ½å‚æ•°å¤„ç† (ç”¨æˆ·å‹å¥½çš„ç™¾åˆ†æ¯”è¾“å…¥)
- âœ… å®æ—¶çŠ¶æ€è·å–å’Œé‡æ–°è®¡ç®— (`getRealTimeStateAndRecalculate`)
- âœ… åŠ¨æ€æ»‘ç‚¹è®¡ç®— (`calculateDynamicSlippage`)
- âœ… å®Œæ•´æ‰§è¡Œæµç¨‹ (`executeWithRealTimeRecalculation`)
- âœ… TickèŒƒå›´è®¡ç®— (`calculateTickRange`)
- âœ… æµåŠ¨æ€§æ•°é‡è®¡ç®— (`calculateLiquidityFromAmount`)

**æ™ºèƒ½å‚æ•°ç¤ºä¾‹**:
```typescript
const params = {
  inputAmount: "0.1",           // 0.1 WBNB (ç”¨æˆ·å‹å¥½)
  inputToken: "WBNB",           // ç®€åŒ–ä»£å¸é€‰æ‹©
  lowerPercent: -5,             // å½“å‰ä»·æ ¼-5%
  upperPercent: 5,              // å½“å‰ä»·æ ¼+5%  
  baseSlippagePercent: 1        // 1%åŸºç¡€æ»‘ç‚¹
};
```

### PositionManager - å¤´å¯¸ç®¡ç†ä¸“ç”¨æœåŠ¡  
**èŒè´£**: 100%å¤ç° `position_management.js` çš„å®Œæ•´å¤´å¯¸ç®¡ç†åŠŸèƒ½

**æ ¸å¿ƒåŠŸèƒ½**:
- âœ… è·å–ç”¨æˆ·å¤´å¯¸ (`getUserPositions`) - åŒ…å«å®Œæ•´ä»£å¸ä¿¡æ¯
- âœ… å…³é—­å•ä¸ªå¤´å¯¸ (`closeSinglePosition`) - Multicallä¸€æ­¥å®Œæˆ
- âœ… æ‰¹é‡å…³é—­æ‰€æœ‰å¤´å¯¸ (`closeAllPositions`) - è‡ªåŠ¨å¤„ç†æ‰€æœ‰ç±»å‹
- âœ… å®Œæ•´çš„é”™è¯¯å¤„ç†å’ŒçŠ¶æ€ç®¡ç†
- âœ… è‡ªåŠ¨NFTé”€æ¯å’Œæ‰‹ç»­è´¹æ”¶é›†

**Multicallä¼˜åŠ¿**: ä¸€æ¬¡äº¤æ˜“å®Œæˆç§»é™¤æµåŠ¨æ€§ + æ”¶é›†æ‰‹ç»­è´¹ + é”€æ¯NFT

### ContractService - åŸºç¡€åˆçº¦äº¤äº’æœåŠ¡
**èŒè´£**: æä¾›åŸºç¡€åˆçº¦äº¤äº’åŠŸèƒ½ï¼Œæ”¯æŒå…¶ä»–ä¸“ç”¨æœåŠ¡

**æ ¸å¿ƒåŠŸèƒ½**:
- âœ… ä»£å¸æˆæƒç®¡ç† (`approveToken`, `checkAllowance`)
- âœ… æ± å­ä¿¡æ¯æŸ¥è¯¢ (`getPoolAddress`, `getPoolState`)  
- âœ… ä»£å¸ä¿¡æ¯æŸ¥è¯¢ (`getTokenInfo`)
- âœ… Tickå·¥å…·æ–¹æ³• (`getTickSpacing`, `nearestUsableTick`)

## ğŸ“Š å®Œæ•´APIæ¥å£

### ğŸ’§ æµåŠ¨æ€§æ“ä½œ (1ä¸ªæ ¸å¿ƒæ¥å£)
- `POST /api/add-liquidity` - æ™ºèƒ½æµåŠ¨æ€§æ·»åŠ  â­â­â­
  - å‚æ•°: inputAmount, inputToken, lowerPercent, upperPercent, baseSlippagePercent
  - è¿”å›: äº¤æ˜“å“ˆå¸Œã€æµåŠ¨æ€§Token IDã€å®é™…æ·»åŠ æ•°é‡

### ğŸ¯ å¤´å¯¸ç®¡ç† (3ä¸ªæ¥å£)  
- `GET /api/positions/:userAddress` - è·å–ç”¨æˆ·æ‰€æœ‰å¤´å¯¸ â­
- `DELETE /api/positions/:tokenId` - å…³é—­å•ä¸ªå¤´å¯¸ 
- `DELETE /api/positions/batch/:userAddress` - æ‰¹é‡å…³é—­æ‰€æœ‰å¤´å¯¸ â­

### ğŸ” é’±åŒ…ç®¡ç† (8ä¸ªæ¥å£)
- `GET /api/wallet/status` - è·å–é’±åŒ…çŠ¶æ€
- `POST /api/wallet/create` - åˆ›å»ºé’±åŒ…
- `POST /api/wallet/unlock` - è§£é”é’±åŒ… â­
- `POST /api/wallet/lock` - é”å®šé’±åŒ…
- `DELETE /api/wallet/delete` - åˆ é™¤é’±åŒ…
- `GET /api/wallet/info` - è·å–é’±åŒ…ä¿¡æ¯
- `POST /api/wallet/connect-web3` - è¿æ¥Web3
- `GET /api/wallet/balance/:address` - è·å–BNBä½™é¢

### ğŸ”„ OKXäº¤æ¢API (6ä¸ªæ¥å£)
- `GET /api/okx/health` - OKXæœåŠ¡å¥åº·æ£€æŸ¥ â­
- `POST /api/okx/quote` - è·å–äº¤æ¢æŠ¥ä»·
- `POST /api/okx/swap` - æ‰§è¡Œä»£å¸äº¤æ¢
- `POST /api/okx/approve` - ä»£å¸æˆæƒ
- `GET /api/okx/track/:orderId` - è¿½è¸ªäº¤æ˜“çŠ¶æ€
- `GET /api/okx/tokens` - è·å–æ”¯æŒçš„ä»£å¸åˆ—è¡¨

### ğŸ“Š ç­–ç•¥ç®¡ç† (7ä¸ªæ¥å£)
- `POST /api/strategy/create` - åˆ›å»ºç­–ç•¥é…ç½® â­
- `POST /api/strategy/:instanceId/start` - å¯åŠ¨ç­–ç•¥å®ä¾‹
- `POST /api/strategy/:instanceId/stop` - åœæ­¢ç­–ç•¥å®ä¾‹
- `DELETE /api/strategy/:instanceId` - åˆ é™¤ç­–ç•¥å®ä¾‹
- `GET /api/strategy/:instanceId/status` - è·å–ç­–ç•¥çŠ¶æ€
- `GET /api/strategy/instances` - è·å–æ‰€æœ‰ç­–ç•¥å®ä¾‹
- `GET /api/strategy/ws/status` - WebSocketçŠ¶æ€æŸ¥è¯¢

### ğŸ”§ ç³»ç»Ÿå·¥å…· (5ä¸ªæ¥å£)
- `GET /api/health` - ç³»ç»Ÿå¥åº·æ£€æŸ¥
- `GET /api/metrics` - ç³»ç»ŸæŒ‡æ ‡
- `GET /api/pool/:token0/:token1/:fee` - æ± å­ä¿¡æ¯æŸ¥è¯¢
- `POST /api/approve` - ä»£å¸æˆæƒ
- `GET /api/allowance/:token/:owner` - æŸ¥è¯¢æˆæƒé¢åº¦

## ğŸ› ï¸ å¼€å‘è§„èŒƒå’Œçº¦æŸ

### æ¶æ„ä¿æŠ¤è§„åˆ™
1. **âœ… LiquidityManager åªå¤„ç†æµåŠ¨æ€§æ·»åŠ **
2. **âœ… PositionManager åªå¤„ç†å¤´å¯¸ç®¡ç†**  
3. **âœ… ContractService åªæä¾›åŸºç¡€åˆçº¦äº¤äº’**
4. **âœ… OKXä»£ç†æœåŠ¡åªè´Ÿè´£8001ç«¯å£çš„é€æ˜è½¬å‘**
5. **âœ… å¿…é¡»100%å¤ç°å‚è€ƒè„šæœ¬åŠŸèƒ½å’Œæ­¥éª¤**
6. **âŒ ç¦æ­¢è·¨èŒè´£è°ƒç”¨ï¼Œä¸¥æ ¼åˆ†å±‚**

### ä»£ç è´¨é‡è¦æ±‚
- **åŠŸèƒ½å¤ç°**: 100%å¤ç°å‚è€ƒè„šæœ¬ï¼Œä¸å…è®¸åˆ å‡æ­¥éª¤
- **æ™ºèƒ½å‚æ•°**: ç”¨æˆ·å‹å¥½çš„å‚æ•°è®¾è®¡ï¼Œé¿å…å¤æ‚è®¡ç®—
- **ä»£ç†é€æ˜**: OKXä»£ç†æœåŠ¡å¯¹ç­–ç•¥å¼•æ“å®Œå…¨é€æ˜

### é”™è¯¯å¤„ç†è§„èŒƒ
- å®Œå–„çš„å¼‚å¸¸æ•è·å’Œé”™è¯¯ä¿¡æ¯
- è¯¦ç»†çš„æ—¥å¿—è®°å½•å’Œè°ƒè¯•ä¿¡æ¯
- ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º
- è‡ªåŠ¨é‡è¯•æœºåˆ¶ï¼ˆé€‚å½“åœºæ™¯ï¼‰
- ä»£ç†æœåŠ¡çš„è¿æ¥çŠ¶æ€ç›‘æ§

### æµ‹è¯•å’Œæ–‡æ¡£è¦æ±‚
- æ‰€æœ‰æµ‹è¯•è„šæœ¬åˆ›å»ºåœ¨ `test/` ç›®å½•ä¸‹
- æ‰€æœ‰è¯´æ˜æ–‡æ¡£ä¿å­˜åœ¨ `docs/` ç›®å½•ä¸‹
- ä¿æŒä»£ç ç®€æ´ã€ç»“æ„æ¸…æ™°ã€å®¹æ˜“æ‰©å±•
- æ¨¡å—åŒ–æ¶æ„è®¾è®¡

## ğŸ¯ å¼€å‘å»ºè®®

### æ–°åŠŸèƒ½å¼€å‘æµç¨‹  
1. **ç¡®è®¤èŒè´£å½’å±**: æ˜ç¡®åŠŸèƒ½å±äºå“ªä¸ªä¸“ç”¨æœåŠ¡
2. **å‚è€ƒå·²æœ‰è§„èŒƒ**: æŸ¥çœ‹ [pancakeswap-architecture.mdc](mdc:pancakeswap-architecture.mdc)  
3. **éµå¾ªä»£ç è§„èŒƒ**: ä¿æŒç®€æ´å’Œæ¨¡å—åŒ–
4. **å®Œå–„é”™è¯¯å¤„ç†**: æ·»åŠ è¯¦ç»†çš„å¼‚å¸¸å¤„ç†
5. **ç¼–å†™æµ‹è¯•ç”¨ä¾‹**: åœ¨ `test/` ç›®å½•åˆ›å»ºæµ‹è¯•

### å¸¸è§å¼€å‘åœºæ™¯
- **æ·»åŠ æ–°API**: åœ¨ [routes.ts](mdc:src/api/routes.ts) æ·»åŠ è·¯ç”±ï¼Œè°ƒç”¨å¯¹åº”ä¸“ç”¨æœåŠ¡
- **æ‰©å±•æµåŠ¨æ€§åŠŸèƒ½**: åœ¨ [LiquidityManager.ts](mdc:src/services/LiquidityManager.ts) ä¸­æ‰©å±•
- **å¢å¼ºå¤´å¯¸ç®¡ç†**: åœ¨ [PositionManager.ts](mdc:src/services/PositionManager.ts) ä¸­å®Œå–„
- **åŸºç¡€åŠŸèƒ½æ”¯æŒ**: åœ¨ [ContractService.ts](mdc:src/services/ContractService.ts) ä¸­æ·»åŠ 
- **OKXåŠŸèƒ½æ‰©å±•**: åœ¨ [okx-proxy-routes.ts](mdc:src/api/okx-proxy-routes.ts) ä¸­æ·»åŠ æ–°è·¯ç”±

### OKXä»£ç†æœåŠ¡ä½¿ç”¨æŒ‡å—
- **ç­–ç•¥å¼•æ“è°ƒç”¨**: ç›´æ¥è®¿é—® `http://localhost:8001/api/okx/*`
- **å¥åº·æ£€æŸ¥**: `curl http://localhost:8001/health`
- **æ—¥å¿—ç›‘æ§**: `tail -f logs/okx-proxy.log`
- **æœåŠ¡ç®¡ç†**: ä½¿ç”¨ç»Ÿä¸€å¯åŠ¨è„šæœ¬æˆ–ç‹¬ç«‹å¯åŠ¨

### æ•…éšœæ’æŸ¥æŒ‡å—
- **å¥åº·æ£€æŸ¥**: è®¿é—® `http://localhost:4000/health`
- **OKXä»£ç†æ£€æŸ¥**: è®¿é—® `http://localhost:8001/health`
- **æ—¥å¿—æŸ¥çœ‹**: æ£€æŸ¥æ§åˆ¶å°è¾“å‡ºå’Œæ—¥å¿—æ–‡ä»¶  
- **æ¥å£æµ‹è¯•**: ä½¿ç”¨ `http://localhost:4000/test/` é¡µé¢
- **æ¶æ„æ–‡æ¡£**: å‚è€ƒ [pancakeswap-architecture.mdc](mdc:pancakeswap-architecture.mdc)
- **ç«¯å£çŠ¶æ€**: è¿è¡Œ `./scripts/check-ports.sh`

---

**è®°ä½**: æœ¬é¡¹ç›®é‡‡ç”¨ä¸¥æ ¼çš„æ¨¡å—åŒ–æ¶æ„ï¼Œæ¯ä¸ªæœåŠ¡ä¸“æ³¨å•ä¸€èŒè´£ã€‚æ–°å¢çš„OKXä»£ç†æœåŠ¡é€šè¿‡é€æ˜è½¬å‘çš„æ–¹å¼ï¼Œå®ç°äº†ç­–ç•¥å¼•æ“ä¸ä¸»ç³»ç»Ÿçš„è§£è€¦ï¼Œä¿æŒäº†æ¶æ„çš„ç‹¬ç«‹æ€§å’Œå¯æ‰©å±•æ€§ã€‚å¼€å‘æ—¶è¯·ä¸¥æ ¼éµå¾ªæ¶æ„è§„èŒƒå’Œä»£ç è´¨é‡è¦æ±‚ã€‚
