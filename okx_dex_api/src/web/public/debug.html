<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OKX DEX è°ƒè¯•é¡µé¢</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .status { padding: 10px; margin: 5px 0; border-radius: 5px; }
        .success { background-color: #d4edda; color: #155724; }
        .error { background-color: #f8d7da; color: #721c24; }
        .info { background-color: #d1ecf1; color: #0c5460; }
        pre { background-color: #f8f9fa; padding: 10px; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>ğŸ”§ OKX DEX å‰ç«¯è°ƒè¯•é¡µé¢</h1>
    
    <div id="results"></div>
    
    <h2>è°ƒè¯•æ§åˆ¶å°</h2>
    <button onclick="testClasses()">æµ‹è¯•ç±»åŠ è½½</button>
    <button onclick="testCrypto()">æµ‹è¯•åŠ å¯†åŠŸèƒ½</button>
    <button onclick="testConfig()">æµ‹è¯•é…ç½®ç®¡ç†</button>
    <button onclick="clearResults()">æ¸…é™¤ç»“æœ</button>
    
    <h2>æ‰‹åŠ¨æµ‹è¯•</h2>
    <p>æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
    <pre>
// æ£€æŸ¥ç±»æ˜¯å¦åŠ è½½
console.log('CryptoUtils:', typeof window.CryptoUtils);
console.log('ConfigManager:', typeof window.ConfigManager);
console.log('APIClient:', typeof window.APIClient);
console.log('Utils:', typeof window.Utils);

// æµ‹è¯•é…ç½®ç®¡ç†
ConfigManager.hasEncryptedConfig();

// è°ƒè¯•è§£é”é…ç½®
debugUnlockConfig();
    </pre>

    <!-- JavaScript æ¨¡å— -->
    <script src="js/crypto-utils.js"></script>
    <script src="js/config-manager.js"></script>
    <script src="js/api-client.js"></script>
    <script src="js/formatters.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/app.js"></script>
    <script src="js/init.js"></script>
    
    <script>
        function addResult(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `status ${type}`;
            div.innerHTML = message;
            document.getElementById('results').appendChild(div);
        }
        
        function clearResults() {
            document.getElementById('results').innerHTML = '';
        }
        
        function testClasses() {
            addResult('ğŸ§ª å¼€å§‹æµ‹è¯•ç±»åŠ è½½...', 'info');
            
            const classes = ['CryptoUtils', 'ConfigManager', 'APIClient', 'Utils', 'OKXDEXApp'];
            
            classes.forEach(className => {
                if (typeof window[className] !== 'undefined') {
                    addResult(`âœ… ${className} - å·²åŠ è½½`, 'success');
                } else {
                    addResult(`âŒ ${className} - æœªåŠ è½½`, 'error');
                }
            });
            
            // æ£€æŸ¥appå®ä¾‹
            if (typeof window.app !== 'undefined') {
                addResult('âœ… appå®ä¾‹ - å·²åˆ›å»º', 'success');
            } else {
                addResult('âŒ appå®ä¾‹ - æœªåˆ›å»º', 'error');
            }
        }
        
        async function testCrypto() {
            addResult('ğŸ” å¼€å§‹æµ‹è¯•åŠ å¯†åŠŸèƒ½...', 'info');
            
            if (typeof window.CryptoUtils === 'undefined') {
                addResult('âŒ CryptoUtilsæœªåŠ è½½ï¼Œæ— æ³•æµ‹è¯•', 'error');
                return;
            }
            
            try {
                const testData = { test: 'hello world' };
                const password = 'test123';
                
                const encrypted = await CryptoUtils.encrypt(testData, password);
                addResult('âœ… åŠ å¯†æµ‹è¯•é€šè¿‡', 'success');
                
                const decrypted = await CryptoUtils.decrypt(encrypted, password);
                if (decrypted.test === testData.test) {
                    addResult('âœ… è§£å¯†æµ‹è¯•é€šè¿‡', 'success');
                } else {
                    addResult('âŒ è§£å¯†æ•°æ®ä¸åŒ¹é…', 'error');
                }
            } catch (error) {
                addResult(`âŒ åŠ å¯†æµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
            }
        }
        
        function testConfig() {
            addResult('âš™ï¸ å¼€å§‹æµ‹è¯•é…ç½®ç®¡ç†...', 'info');
            
            if (typeof window.ConfigManager === 'undefined') {
                addResult('âŒ ConfigManageræœªåŠ è½½ï¼Œæ— æ³•æµ‹è¯•', 'error');
                return;
            }
            
            try {
                const hasConfig = ConfigManager.hasEncryptedConfig();
                addResult(`âœ… é…ç½®æ£€æŸ¥é€šè¿‡ - æœ¬åœ°é…ç½®: ${hasConfig ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨'}`, 'success');
                
                // æµ‹è¯•localStorage
                localStorage.setItem('test_key', 'test_value');
                const testValue = localStorage.getItem('test_key');
                localStorage.removeItem('test_key');
                
                if (testValue === 'test_value') {
                    addResult('âœ… localStorageæµ‹è¯•é€šè¿‡', 'success');
                } else {
                    addResult('âŒ localStorageæµ‹è¯•å¤±è´¥', 'error');
                }
            } catch (error) {
                addResult(`âŒ é…ç½®æµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨æµ‹è¯•
        window.addEventListener('load', function() {
            setTimeout(() => {
                addResult('ğŸš€ é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹è‡ªåŠ¨æµ‹è¯•...', 'info');
                testClasses();
            }, 1000);
        });
    </script>
</body>
</html> 